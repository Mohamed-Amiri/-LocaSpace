<header class="modern-header">
  <div class="header-content">
    <div class="logo">
      <a routerLink="/" class="logo-link">
        <div class="logo-icon">
          <svg width="36" height="36" viewBox="0 0 36 36" fill="none">
            <rect width="36" height="36" rx="12" fill="url(#logoGradient)"/>
            <path d="M10 14h16v8H10z" fill="white" opacity="0.9"/>
            <path d="M14 10h8v4h-8z" fill="white" opacity="0.7"/>
            <circle cx="18" cy="18" r="2" fill="white"/>
            <defs>
              <linearGradient id="logoGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#2563EB"/>
                <stop offset="25%" style="stop-color:#3B82F6"/>
                <stop offset="50%" style="stop-color:#60A5FA"/>
                <stop offset="100%" style="stop-color:#7DD3FC"/>
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="logo-content">
          <span class="logo-text">LocaSpace</span>
          <span class="logo-tagline">Your smart platform for space rentals</span>
        </div>
      </a>
    </div>
    <nav class="main-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">
        <span class="nav-text">Home</span>
      </a>
      <a routerLink="/locataire/search" routerLinkActive="active" class="nav-link nav-link--primary">
        <span class="nav-text">Explore Spaces</span>
      </a>

      <a routerLink="/help" routerLinkActive="active" class="nav-link">
        <span class="nav-text">Help</span>
      </a>
    </nav>
    <div class="header-actions">
      <button class="theme-toggle" (click)="toggleTheme()" [attr.aria-label]="'Basculer vers le mode ' + (isDarkMode ? 'clair' : 'sombre')">
        <div class="theme-icon">
          <svg *ngIf="!isDarkMode" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="5"/>
            <line x1="12" y1="1" x2="12" y2="3"/>
            <line x1="12" y1="21" x2="12" y2="23"/>
            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
            <line x1="1" y1="12" x2="3" y2="12"/>
            <line x1="21" y1="12" x2="23" y2="12"/>
            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
          </svg>
          <svg *ngIf="isDarkMode" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </div>
      </button>
      
      <!-- Show login/register links only when NOT authenticated -->
      <ng-container *ngIf="!(authService.currentUser$ | async)">
        <a routerLink="/login" class="header-btn header-btn--ghost" (click)="debugNavigation('login')">
          Log In
        </a>
        <a routerLink="/register" class="header-btn header-btn--primary" (click)="debugNavigation('register')">
          <span>Get Started</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12,5 19,12 12,19"/>
          </svg>
        </a>
      </ng-container>
      
      <!-- Show user menu when authenticated -->
      <ng-container *ngIf="authService.currentUser$ | async as user">
        <div class="user-menu">
          <div class="user-avatar">
            <span>{{user.firstName.charAt(0)}}{{user.lastName ? user.lastName.charAt(0) : ''}}</span>
          </div>
          <div class="user-info">
            <span class="user-name">{{user.firstName}}</span>
            <a *ngIf="user.role === 'tenant'" routerLink="/locataire/reservations" class="user-link">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </svg>
              Mes réservations
            </a>
            <button class="logout-btn" (click)="logout()">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                <polyline points="16,17 21,12 16,7"/>
                <line x1="21" y1="12" x2="9" y2="12"/>
              </svg>
              Déconnexion
            </button>
          </div>
        </div>
      </ng-container>
    </div>
    <!-- Hamburger Menu Toggle -->
    <button class="menu-toggle" (click)="toggleMenu()" [class.active]="isMenuOpen" [attr.aria-label]="'Menu ' + (isMenuOpen ? 'ouvert' : 'fermé')">
      <span class="menu-icon">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </span>
    </button>
  </div>

  <!-- Mobile Navigation Panel -->
  <div class="mobile-nav-panel" [class.open]="isMenuOpen">
    <a routerLink="/" (click)="closeMenu()">Accueil</a>
    <a routerLink="/locataire/search" (click)="closeMenu()">Nos Lieux</a>

    
    <!-- Show login/register links only when NOT authenticated -->
    <ng-container *ngIf="!(authService.currentUser$ | async)">
      <a routerLink="/login" class="btn btn-secondary" (click)="closeMenu(); debugNavigation('login')">Connexion</a>
      <a routerLink="/register" class="btn btn-primary" (click)="closeMenu(); debugNavigation('register')">Inscription</a>
    </ng-container>
    
    <!-- Show user options when authenticated -->
    <ng-container *ngIf="authService.currentUser$ | async as user">
      <div class="mobile-user-info">
        <span>Bonjour, {{user.firstName}}</span>
        <a routerLink="/locataire/reservations" (click)="closeMenu()">Mes réservations</a>
        <button class="btn btn-secondary" (click)="logout(); closeMenu()">Déconnexion</button>
      </div>
    </ng-container>
  </div>
</header>
